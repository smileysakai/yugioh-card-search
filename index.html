<html>
	<head>
		<meta charset="utf-8">
		<title>Yugioh Card Search</title>
		<!--Script-->
		<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
		<script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.10.23/sc-2.0.3/sp-1.2.2/sl-1.3.1/datatables.min.js"></script>
		
		<!--CSS-->
		<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.10.23/sc-2.0.3/sp-1.2.2/sl-1.3.1/datatables.min.css"/>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
		<link href="assets\stylesheets\main.css" rel="stylesheet">
	</head>
	<body>
		<div class="container text-center topper">
			<img src="assets/media/duel_links.png">
			<h2>Yugioh Duel Links Card Search</h2>
			<p>This site uses the <a href="https://db.ygoprodeck.com/api-guide/">YGOProDeck API</a> to source cards.</p>
			<div class="row">
				<div class="col-12">
					<h4>Search for Card</h4>
					<table id="yugiohcards" class="display table-striped" width="100%">
						<thead>
							<tr>
								<th>Archetype</th>
								<th>Level</th>
								<th>Name</th>
								<th>Attribute</th>
								<th>Type</th>
								<th>Race</th>
								<th>Desc</th>
								<th>Card Image</th>
							</tr>
						</thead>
					</table>
				</div>
		</div>
		
		<script>
		$(document).ready(function() {
			$('#yugiohcards').DataTable( {
				searchPanes: {
					cascadePanes: true,
					viewTotal: true
				},
				dom: 'Plfrtip',
				ajax: {
					url: 'https://db.ygoprodeck.com/api/v7/cardinfo.php?format=Duel Links',
					dataSrc: 'data'
				},
				columns: [
					{data: "archetype", 
						"render": function ( data, type, row, meta ) {
							if (data == undefined) {
								return "-"
							}else{
								return data
					}}},
					{data: "level", 
					"render": function ( data, type, row, meta ) {
						if (data == undefined) {
							return "-"
						}else{
							return data
					}}},
					{data: "name"},
					{data: "attribute", 
					"render": function ( data, type, row, meta ) {
						if (data == undefined) {
							return "-"
						}else{
							return data
					}}},
					{data: "type"},
					{data: "race"},
					{data: "desc"},
					{data: "card_images.0.image_url",
					"render": function ( data, type, row, meta ) {
						return '<a class="tiptext" href="'+data+'">Card Image<iframe class="cardpreview" src="'+data+'"></iframe></a>';
					}}
				],
				deferRender: true
			} );
		} );
		</script>
		
		
	</body>
</html>